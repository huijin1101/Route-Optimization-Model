
[View Notebook on nbviewer](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#1.1-Data-preparation-and-OSMnx-graph-creation)
# Table of Contents

Click on the links below to navigate to specific sections via **nbviewer**:

- [Chapter 1: Match Real Trip Routes with Calculated Shortest Routes from OSMnx](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#Chapter-1-Match-Real-Trip-Routes-with-Calculated-Shortest-Routes-from-OSMnx)
  - [1.1 Data preparation and OSMnx graph creation](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#1.1-Data-preparation-and-OSMnx-graph-creation)
  - [1.2 Match the end points of each trip with the nodes from the OSMnx graph and calculate the shortest route with the obtained nodes](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#1.2-Match-the-end-points-of-each-trip-with-the-nodes-from-the-OSMnx-graph-and-calculate-the-shortest-route-with-the-obtained-nodes)
  - [1.3 Filter trips based on the match result](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#1.3-Filter-trips-based-on-the-match-result)
    - [1.3.1 Filter trips by the point-to-nearest-node distance](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#1.3.1-Filter-trips-by-the-point-to-nearest-node-distance)
    - [1.3.2 Filter trips by the absolute difference between the real trip miles and the calculated shortest route length](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#1.3.2-Filter-trips-by-the-absolute-difference-between-the-real-trip-miles-and-the-calculated-shortest-route-length)
      - [1.3.2.1 Compare the trip features before and after filtering with different thresholds](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#1.3.2.1-compare-the-trip-features-before-and-after-filter-with-different-thresholds)
      - [1.3.2.2 Compare the temporal traffic pattern before and after filtering with the 500m threshold](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#1.3.2.2-compare-the-temporal-traffic-pattern-before-and-after-filter-with-the-500m-threshold)

- [Chapter 2: Create Segment-Level Dataset](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#Chapter-2-Create-Segment-Level-Dataset)
  - [2.1 Cluster all road segments of Chicago into regions](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#2.1-Cluster-all-road-segments-of-Chicago-into-regions)
  - [2.2 Extract the road segments details from G](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#2.2-Extract-the-road-segments-details-from-G)
  - [2.3 Display the road segments in our dataset on OSMnx graph and check their coverage ratio in each region](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#2.3-Display-the-road-segments-in-our-dataset-on-OSMnx-graph-and-check-their-coverage-ratio-in-each-region)
  - [2.4 Complete the segment-level traffic information](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#2.4-Complete-the-segment-level-traffic-information)

- [Chapter 3: Check the Temporal Traffic Pattern Completeness for Each Region](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#Chapter-3-Check-the-Temporal-Traffic-Pattern-Completeness-for-Each-Region)

- [Chapter 4: Road Segments Clustering within Each Region](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#Chapter-4-Road-Segments-Clustering-within-Each-Region)
  - [4.1 Data preparation for KMeans clustering](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#4.1-Data-preparation-for-KMeans-clustering)
  - [4.2 Use elbow method to determine K for each region](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#4.2-Use-elbow-method-to-determine-K-for-each-region)

- [Chapter 5: Build ML Models for Predicting the Travel Time for Each Road Segment Cluster](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#Chapter-5--Build-ML-models-for-predicting-the--travel-time-for-each-road-segment-cluster)
  - [5.1 Check the clustering accuracy by plotting the inferred travel time histogram for each cluster](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#5.1-Check-the-clustering-accuracy-by-plotting-the-inferred-travel-time-histogram-for-each-cluster)
  - [5.2 EDA for feature engineering](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#5.2-EDA-for-feature-engineering)
    - [5.2.1 Fill Up Missing Hours](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#5.2.1-fill-up-missing-hours)
    - [5.2.2 Generate Lag and Rolling Features](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#5.2.2-Generate-lag-and-rolling-features)
    - [5.2.3 EDA on Individual Features and Correlation Between Features](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#5.2.3-EDA-on-individual-features-and-correlation-between-features)
      - [5.2.3.1 Exploring Single Numerical Features](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#5.2.3.1-Exploring-single-numerical-features)
      - [5.2.3.2 Exploring the Correlation Between Features](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#5.2.3.2-Exploring-the-correlation-between-features)
      - [5.2.3.3 Use XGBoost as the Base Model to Do Feature Engineering](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#5.2.3.3-Use-Xgboost-as-the-base-model-to-do-feature-engneering)

  - [5.3 Machine Learning Modeling](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#5.3-Machine-Learning-Modeling)
    - [5.3.1 XGBoost Model with Bayesian Optimization (BayesSearchCV)](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#5.3.1-Xgboost-model-with-Bayesian-optimization-(BayesSearchCV))
    - [5.3.2 Prophet Model](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#5.3.2-Prophet-model)

  - [5.4 Use the Prediction Results to Do Route Optimization and Compare the Results with That Based on the Inferred Travel Time](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#5.4-Use-the-prediction-results-to-do-route-optimization-and-compare-the-results-with-that-based-on-the-inferred-travel-time)
    - [5.4.1 Merge the Prediction Results for Each Cluster to the Original Regional Dataset](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#5.4.1-Merge-the-prediction-results-for-each-cluster-to-the-original-regional-dataset)
    - [5.4.2 Compare the Route Optimization Results by Using the Prediction Results on Cluster Level and the Inferred Travel Time on Segment Level](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#5.4.2-Compare-the-route-optimization-results-by-using-the-predition-results-on-cluster-level-and-the-inferred-travel-time-on-segment-level)
      - [5.4.2.1 Analyze the Difference Between the Inferred Travel Time and the Predicted Travel Time for Each Segment](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#5.4.2.1-Analyze-the-difference-between-the-inferred_travel_time_sec-and-the-predicted-travel-time-for-each-segment)
      - [5.4.2.2 Compare the Route Optimization Results by the Prediction and the Inferred Travel Time](https://nbviewer.org/github/huijin1101/Route-Optimization-Model/blob/main/Notebook/Chicago_Route_Optimization-completecode_clean.ipynb#5.4.2.2-Compare-the-route-optimization-results-by-the-prediction-and-the-inferred-travel-time)

